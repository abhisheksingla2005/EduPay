<section class="relative">
  <div class="absolute inset-0 -z-10 bg-gradient-to-br from-indigo-500/20 via-blue-500/10 to-purple-500/30 blur-3xl"></div>
  <div class="max-w-7xl mx-auto px-4 py-10 grid md:grid-cols-2 gap-8 items-center">
    <div class="hidden md:block">
      <div class="glass-panel rounded-3xl p-8">
        <div class="text-sm tracking-wider mb-2 font-semibold">EDUPAY</div>
        <h2 class="text-3xl font-bold mb-2">Create your account</h2>
        <p class="text-slate-600 dark:text-slate-300">Choose a role and get started in minutes.</p>
      </div>
    </div>
    <div>
      <div class="rounded-3xl p-8 shadow-xl bg-white/80 dark:bg-slate-900/70 backdrop-blur border border-slate-200/60 dark:border-slate-700/60">
        <h2 class="text-2xl font-semibold mb-6">Register</h2>
        <% if (error) { %><div class="mb-3 text-sm text-red-600"><%= error %></div><% } %>
        <form method="post" action="/auth/register" class="space-y-5" novalidate>
          <div>
            <label class="block text-sm mb-1">Name</label>
            <input type="text" name="name" class="w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white/70 dark:bg-slate-800/70 px-3 py-2" placeholder="Your full name" required />
          </div>
          <div>
            <label class="block text-sm mb-1">Email</label>
            <input type="email" name="email" class="w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white/70 dark:bg-slate-800/70 px-3 py-2" placeholder="you@example.com" required />
          </div>
          <div>
            <label class="block text-sm mb-1">Password</label>
            <div class="relative">
              <input id="regPassword" type="password" name="password" class="w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white/70 dark:bg-slate-800/70 px-3 py-2" placeholder="••••••••" required />
              <button type="button" class="absolute inset-y-0 right-2 px-2 text-slate-500" data-toggle-pass="#regPassword">Show</button>
            </div>
            <div class="text-xs text-slate-500 mt-1">Use at least 8 characters.</div>
          </div>
          <div>
            <label class="block text-sm mb-2">Select Role</label>
            <div id="roleSelect" class="grid grid-cols-2 gap-3">
              <button type="button" class="role-pill-tw" data-role="student">Student</button>
              <button type="button" class="role-pill-tw" data-role="donor">Donor</button>
            </div>
            <input type="hidden" name="role" id="roleInput" value="student" />
          </div>
          <button class="w-full px-4 py-2 rounded-lg bg-indigo-600 hover:bg-indigo-500 text-white font-medium shadow">Create Account</button>
        </form>
        <div class="text-center text-sm mt-4">Have an account? <a href="/auth/login" class="text-indigo-600">Login</a></div>
      </div>
    </div>
  </div>
</section>
<script>
  // Password toggle
  document.querySelectorAll('[data-toggle-pass]').forEach(btn=>{
    btn.addEventListener('click',()=>{ const t=document.querySelector(btn.getAttribute('data-toggle-pass')); if(!t)return; t.type=t.type==='password'?'text':'password'; btn.textContent=t.type==='password'?'Show':'Hide'; });
  });
  // Role selection
  const roleInput=document.getElementById('roleInput');
  function setActive(role){
    roleInput.value=role;
    document.querySelectorAll('.role-pill-tw').forEach(p=>{
      p.classList.toggle('active', p.dataset.role===role);
    });
  }
  document.querySelectorAll('.role-pill-tw').forEach(p=>{
    p.addEventListener('click',()=> setActive(p.dataset.role));
  });
  setActive('student');
</script>
