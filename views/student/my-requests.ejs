<h2 class="text-2xl font-semibold mb-4">My Requests</h2>
<% if (error) { %><div class="mb-3 px-4 py-3 rounded-lg bg-red-50 text-red-700 border border-red-200"><%= error %></div><% } %>
<div class="space-y-4">
  <% if (!myRequests.length) { %>
    <div class="px-4 py-3 rounded-lg bg-slate-50 dark:bg-slate-800 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-700">No requests yet.</div>
  <% } %>
  <% myRequests.forEach(r => { %>
    <div class="p-4 rounded-xl bg-white/80 dark:bg-slate-900/60 backdrop-blur border border-slate-200/60 dark:border-slate-700/60 shadow">
      <form method="post" action="/student/update/<%= r._id %>" class="grid md:grid-cols-5 gap-3 items-end">
        <div class="md:col-span-1">
          <label class="block text-xs font-medium mb-1">Title</label>
          <input class="w-full rounded-lg border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900/60 px-2 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500" name="title" value="<%= r.title %>" />
        </div>
        <div class="md:col-span-2">
          <label class="block text-xs font-medium mb-1">Description</label>
          <input class="w-full rounded-lg border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900/60 px-2 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500" name="description" value="<%= r.description %>" />
        </div>
        <div>
          <label class="block text-xs font-medium mb-1">Amount (₹)</label>
          <input type="number" min="1" class="w-full rounded-lg border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900/60 px-2 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500" name="amountRequested" value="<%= r.amountRequested %>" />
        </div>
        <div>
          <label class="block text-xs font-medium mb-1">Deadline</label>
          <input type="date" class="w-full rounded-lg border border-slate-300 dark:border-slate-700 bg-white/80 dark:bg-slate-900/60 px-2 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500" name="deadline" value="<%= r.deadline ? r.deadline.toISOString().slice(0,10) : '' %>" />
        </div>
        <div>
          <button class="w-full px-3 py-2 rounded-lg bg-indigo-600 hover:bg-indigo-500 text-white text-sm">Save</button>
        </div>
      </form>
      <div class="flex items-center justify-between mt-3 text-xs">
        <div class="flex items-center gap-2">
          <span class="px-2 py-1 rounded bg-slate-200 dark:bg-slate-700"><%= r.status %></span>
          <span class="text-slate-600 dark:text-slate-300">₹ <%= r.amountFunded %> / ₹ <%= r.amountRequested %></span>
        </div>
        <form method="post" action="/student/delete/<%= r._id %>" onsubmit="return confirm('Delete this request?')">
          <button class="px-2 py-1 rounded border border-red-400 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20" aria-label="Delete"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-4 h-4"><path d="M9.879 3.879A3 3 0 0 1 12 3h3a3 3 0 0 1 3 3v1h1.5a.75.75 0 0 1 0 1.5h-.71l-.86 10.37A3 3 0 0 1 14.94 22H11.06a3 3 0 0 1-2.98-2.13L7.22 8.5h-.71a.75.75 0 0 1 0-1.5H8V6c0-.795.316-1.559.879-2.121ZM9.5 6v1.5h5V6A1.5 1.5 0 0 0 13 4.5h-1a1.5 1.5 0 0 0-1.5 1.5Zm.495 5.25a.75.75 0 0 0-1.49.1l.5 5.5a.75.75 0 0 0 1.49-.1l-.5-5.5Zm4.24.1a.75.75 0 0 1 1.49-.1l-.5 5.5a.75.75 0 0 1-1.49.1l.5-5.5Z"/></svg></button>
        </form>
      </div>
    </div>
  <% }) %>
</div>
